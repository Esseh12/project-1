InsightInitScript = { _settings: null, _client: null, _createClient: function (t) { InsightInitScript._client = new sfDataIntell.Client({ apiKey: InsightInitScript._settings.apiKey, source: InsightInitScript._settings.applicationName, apiServerUrl: InsightInitScript._settings.apiServerUrl, trackingCookieDomain: InsightInitScript._settings.trackingCookieDomain, maxAgeForTrackingCookieInDays: InsightInitScript._settings.maxAgeForTrackingCookieInDays, slidingExpirationForTrackingCookie: InsightInitScript._settings.slidingExpirationForTrackingCookie, trackYouTubeVideos: InsightInitScript._settings.trackYouTubeVideos, trackPageVisits: !0, trackVideos: !0, instrument: !0, trackBrowserInformation: !0, trackDocuments: !0, docsHrefTestExpressions: InsightInitScript._settings.docsHrefTestExpressions, enableTracking: t }); var n = InsightInitScript._settings.keepDecTrackingCookieOnTrackingConsentRejection || !1; if (!1 === t && !1 === n && InsightInitScript._client.deleteCookie(InsightInitScript._settings.trackingCookieDomain), window.DataIntelligenceSubmitScript = InsightInitScript, "function" == typeof window.CustomEvent) document.dispatchEvent(new window.CustomEvent("decclientready")); else { var e = function (t, n) { n = n || { bubbles: !1, cancelable: !1, detail: void 0 }; var e = document.createEvent("CustomEvent"); return e.initCustomEvent(t, n.bubbles, n.cancelable, n.detail), e }; e.prototype = window.Event.prototype, window.CustomEvent = e; var i = new e("decclientready", { bubbles: !0, cancelable: !0 }); document.dispatchEvent(i) } }, load: function () { var t = document.querySelector("#sf-insight-settings"); if (t) { var n = t.textContent.trim(); InsightInitScript._settings = JSON.parse(n) } var e = document.querySelector("#sf-insight-metadata"); if (e) { var i = e.textContent.trim(), a = JSON.parse(i); window.decMetadata = window.decMetadata || {}, window.decMetadata.contentMetadata = JSON.parse(a.contentMetadata), window.decMetadata.videosMetadata = JSON.parse(a.videosMetadata), window.sfCorrelationId && (window.decMetadata.contentMetadata.CorrelationId = window.sfCorrelationId) } window.TrackingConsentManager ? (TrackingConsentManager.removeEventListener("ConsentChanged", InsightInitScript._createClient), TrackingConsentManager.addEventListener("ConsentChanged", InsightInitScript._createClient), InsightInitScript._createClient(TrackingConsentManager.canTrackCurrentUser())) : InsightInitScript._createClient(!0) } }, document.addEventListener("insight-sdk-ready", InsightInitScript.load);